<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caloriv Developer Documentation | Architecture & API</title>
    <meta name="robots" content="noindex, follow">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Fira+Code:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            background-color: #0f172a;
            color: #ffffff;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        /* Container */
        .docs-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 1.5rem 2rem;
        }

        /* Typography */
        .docs-title {
            font-size: clamp(1.75rem, 5vw, 2.5rem);
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #ffffff 0%, #a855f7 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .docs-subtitle {
            color: #94a3b8;
            font-size: clamp(0.95rem, 2vw, 1.1rem);
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .section-heading {
            font-size: clamp(1.4rem, 3vw, 1.8rem);
            font-weight: 700;
            margin: 2.5rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(168, 85, 247, 0.3);
            color: #ffffff;
        }

        .subsection-heading {
            font-size: clamp(1.1rem, 2.5vw, 1.3rem);
            font-weight: 600;
            margin: 1.5rem 0 0.75rem;
            color: #e2e8f0;
        }

        p {
            color: #cbd5e1;
            line-height: 1.7;
            margin-bottom: 1rem;
            font-size: clamp(0.9rem, 1.5vw, 1rem);
        }

        /* Info Card */
        .info-card {
            background: rgba(168, 85, 247, 0.1);
            border-left: 4px solid #a855f7;
            padding: 1.25rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .info-card h3 {
            margin: 0 0 0.5rem;
            font-size: 1.1rem;
            color: #a855f7;
        }

        .info-card p {
            margin: 0;
            font-size: 0.95rem;
        }

        /* Code Blocks */
        code {
            font-family: 'Fira Code', monospace;
            background: rgba(30, 41, 59, 0.6);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.9em;
            color: #a855f7;
            word-break: break-word;
        }

        pre {
            background: #1e293b;
            padding: 1.25rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }

        pre code {
            background: transparent;
            padding: 0;
            color: #e2e8f0;
            font-size: clamp(0.8rem, 1.5vw, 0.9rem);
            display: block;
            white-space: pre;
            overflow-x: auto;
        }

        /* API Endpoint Cards */
        .endpoint {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .method {
            display: inline-block;
            padding: 0.35rem 0.75rem;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.75rem;
            font-family: 'Fira Code', monospace;
            text-transform: uppercase;
        }

        .method-get {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .method-post {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .method-put {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .method-delete {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .endpoint-path {
            font-family: 'Fira Code', monospace;
            color: #e2e8f0;
            font-size: clamp(0.85rem, 1.5vw, 1rem);
            word-break: break-all;
        }

        .endpoint-desc {
            color: #94a3b8;
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }

        /* Tables */
        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: clamp(0.85rem, 1.5vw, 0.9rem);
            overflow-x: auto;
            display: block;
        }

        .param-table thead {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

        .param-table tbody {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

        .param-table th {
            text-align: left;
            padding: 0.75rem;
            background: rgba(30, 41, 59, 0.5);
            color: #e2e8f0;
            font-weight: 600;
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
        }

        .param-table td {
            padding: 0.75rem;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            color: #cbd5e1;
        }

        .param-table td:first-child {
            font-family: 'Fira Code', monospace;
            color: #a855f7;
            font-size: 0.85em;
        }

        /* Lists */
        ul,
        ol {
            color: #cbd5e1;
            line-height: 1.8;
            margin: 1rem 0;
            padding-left: 1.5rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        strong {
            color: #ffffff;
            font-weight: 600;
        }

        /* Mobile Navigation Toggle */
        .mobile-nav-toggle {
            display: none;
            position: fixed;
            bottom: 2rem;
            right: 1.5rem;
            background: linear-gradient(135deg, #a855f7, #3b82f6);
            color: white;
            border: none;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(168, 85, 247, 0.4);
            z-index: 1000;
            transition: transform 0.2s;
        }

        .mobile-nav-toggle:active {
            transform: scale(0.95);
        }

        /* Sidebar Navigation */
        .sidebar-nav {
            position: fixed;
            top: 0;
            left: -100%;
            width: 280px;
            height: 100vh;
            background: #1e293b;
            padding: 5rem 1.5rem 2rem;
            overflow-y: auto;
            transition: left 0.3s ease;
            z-index: 999;
            border-right: 1px solid rgba(148, 163, 184, 0.2);
        }

        .sidebar-nav.active {
            left: 0;
        }

        .nav-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 998;
        }

        .nav-overlay.active {
            display: block;
        }

        .nav-section {
            margin-bottom: 2rem;
        }

        .nav-section-title {
            color: #94a3b8;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.75rem;
            font-weight: 600;
        }

        .nav-link {
            display: block;
            padding: 0.5rem 0.75rem;
            color: #cbd5e1;
            text-decoration: none;
            border-radius: 6px;
            margin-bottom: 0.25rem;
            transition: all 0.2s;
            font-size: 0.95rem;
        }

        .nav-link:hover {
            background: rgba(168, 85, 247, 0.1);
            color: #a855f7;
        }

        /* Desktop Sidebar */
        @media (min-width: 1024px) {
            .docs-wrapper {
                padding-left: 320px;
            }

            .sidebar-nav {
                left: 0;
                width: 280px;
                padding-top: 120px;
            }

            .mobile-nav-toggle {
                display: none !important;
            }
        }

        /* Mobile Optimizations */
        @media (max-width: 1023px) {
            .mobile-nav-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .param-table {
                font-size: 0.8rem;
            }

            .param-table th,
            .param-table td {
                padding: 0.5rem;
            }
        }

        /* Navbar adjustments for docs */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }

        @media (max-width: 768px) {
            .navbar .logo {
                font-size: 1.1rem;
            }

            .navbar .logo img {
                height: 28px;
            }

            .btn-secondary {
                padding: 0.4rem 0.8rem !important;
                font-size: 0.75rem !important;
            }
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="container nav-container">
            <a href="index.html" class="logo">
                <img src="assets/images/logo.png" alt="Caloriv Logo">
                CALORIV <span style="font-size: 0.75rem; opacity: 0.7; margin-left: 8px; font-weight: 400;">DOCS</span>
            </a>
            <a href="index.html" class="btn btn-secondary" style="padding: 0.5rem 1.25rem;">
                <i class="fas fa-arrow-left" style="margin-right: 0.5rem;"></i> Home
            </a>
        </div>
    </nav>

    <!-- Mobile Navigation Toggle -->
    <button class="mobile-nav-toggle" onclick="toggleNav()">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Navigation Overlay -->
    <div class="nav-overlay" onclick="toggleNav()"></div>

    <!-- Sidebar Navigation -->
    <nav class="sidebar-nav">
        <div class="nav-section">
            <div class="nav-section-title">Getting Started</div>
            <a href="#overview" class="nav-link" onclick="closeNav()">Overview</a>
            <a href="#architecture" class="nav-link" onclick="closeNav()">Architecture</a>
        </div>
        <div class="nav-section">
            <div class="nav-section-title">System Core</div>
            <a href="#storage" class="nav-link" onclick="closeNav()">Storage Layer</a>
            <a href="#tracking" class="nav-link" onclick="closeNav()">Step Tracking</a>
        </div>
        <div class="nav-section">
            <div class="nav-section-title">API Reference</div>
            <a href="#auth-api" class="nav-link" onclick="closeNav()">Authentication</a>
            <a href="#data-api" class="nav-link" onclick="closeNav()">Data Endpoints</a>
            <a href="#admin-api" class="nav-link" onclick="closeNav()">Admin API</a>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="docs-wrapper">

        <!-- Overview -->
        <section id="overview">
            <h1 class="docs-title">Developer Documentation</h1>
            <p class="docs-subtitle">Complete technical reference for the Caloriv fitness ecosystem. This documentation
                covers the native mobile application architecture, backend API specifications, and data flow principles.
            </p>

            <div class="info-card">
                <h3>Version 69.0.0</h3>
                <p>The current documentation reflects the architecture of the latest stable build utilizing React Native
                    + Expo managed workflow.</p>
            </div>
        </section>

        <!-- Architecture -->
        <section id="architecture">
            <h2 class="section-heading">üèóÔ∏è Architecture Overview</h2>
            <p>Caloriv is architected as an <strong>Offline-First</strong> native application. It prioritizes local data
                persistence for instant UX, syncing with the cloud only when connectivity permits.</p>

            <h3 class="subsection-heading">Key Principles</h3>
            <ul>
                <li><strong>State Management:</strong> Centralized Context API (<code>CalorivContext</code>) manages
                    user profile, daily logs, and metrics.</li>
                <li><strong>Offline Persistence:</strong> Uses <code>AsyncStorage</code> for storing JSON blobs of daily
                    logs locally.</li>
                <li><strong>Sync Strategy:</strong> Optimistic UI updates. Data is written locally first, then
                    background synced to Cosmos DB.</li>
            </ul>

            <h3 class="subsection-heading">Tech Stack</h3>
            <pre><code><strong>Frontend:</strong> React Native, Expo, TypeScript
<strong>Backend:</strong> Azure Functions (Node.js/Express)
<strong>Database:</strong> Azure Cosmos DB (NoSQL)
<strong>Auth:</strong> JWT (JSON Web Tokens) + Bcrypt</code></pre>
        </section>

        <!-- Storage Layer -->
        <section id="storage">
            <h2 class="section-heading">üíæ Storage Layer</h2>
            <p>Migration from Web (IndexedDB) to Native (AsyncStorage) allows for persistent data storage across app
                restarts.</p>

            <h3 class="subsection-heading">Schema Structure</h3>
            <p>Data is stored as key-value pairs:</p>
            <table class="param-table">
                <thead>
                    <tr>
                        <th>Key Pattern</th>
                        <th>Value Type</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>user_profile</td>
                        <td>JSON Object</td>
                        <td>User demographics, goals, and settings.</td>
                    </tr>
                    <tr>
                        <td>daily_log_{YYYY-MM-DD}</td>
                        <td>JSON Array</td>
                        <td>Food intake logs keyed by date.</td>
                    </tr>
                    <tr>
                        <td>metrics_{YYYY-MM-DD}</td>
                        <td>JSON Object</td>
                        <td>Daily stats (weight, water, steps).</td>
                    </tr>
                    <tr>
                        <td>step_tracker_mode</td>
                        <td>String</td>
                        <td>enum: 'AUTO' | 'MANUAL'</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Step Tracking -->
        <section id="tracking">
            <h2 class="section-heading">üë£ Step Tracking Engine</h2>
            <p>Caloriv uses a hybrid tracking approach:</p>
            <ol>
                <li><strong>Hardware Pedometer (Auto):</strong> Interfaces with <code>expo-sensors</code> (CoreMotion on
                    iOS, Google Fit Sensor on Android) for battery-efficient background counting.</li>
                <li><strong>Manual Override:</strong> Users can switch to manual entry mode if they prefer to sync from
                    external wearables manually.</li>
            </ol>
        </section>

        <!-- Authentication API -->
        <section id="auth-api">
            <h2 class="section-heading">üîê Authentication API</h2>
            <p>Base URL: <code>https://caroliv-api.azurewebsites.net</code></p>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method method-post">POST</span>
                    <span class="endpoint-path">/api/login</span>
                </div>
                <p class="endpoint-desc">Authenticate a user and retrieve a JWT token.</p>
                <h4 style="color: #e2e8f0; font-size: 0.9rem; margin: 1rem 0 0.5rem;">Request Body</h4>
                <pre><code>{
  "email": "user@example.com",
  "password": "yourpassword"
}</code></pre>
            </div>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method method-post">POST</span>
                    <span class="endpoint-path">/api/register</span>
                </div>
                <p class="endpoint-desc">Create a new user account with initial profile data.</p>
                <h4 style="color: #e2e8f0; font-size: 0.9rem; margin: 1rem 0 0.5rem;">Request Body</h4>
                <pre><code>{
  "email": "user@example.com",
  "password": "strongpassword",
  "name": "Sarthak",
  "gender": "male",
  "height": 175,
  "weight": 70
}</code></pre>
            </div>
        </section>

        <!-- Data API -->
        <section id="data-api">
            <h2 class="section-heading">üìä Data API</h2>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="endpoint-path">/api/foods</span>
                </div>
                <p class="endpoint-desc">Search the global food database or filter by category.</p>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Query Param</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>search</td>
                            <td>String query for food name (e.g., "Roti").</td>
                        </tr>
                        <tr>
                            <td>category</td>
                            <td>Filter by category (e.g., "Breakfast", "Indian").</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="endpoint-path">/api/exercises</span>
                </div>
                <p class="endpoint-desc">Retrieve valid exercises for logging.</p>
            </div>
        </section>

        <!-- Admin API -->
        <section id="admin-api">
            <h2 class="section-heading">üõ°Ô∏è Admin API</h2>
            <p>Secured endpoints for content management. Requires Admin-level JWT role.</p>

            <div class="endpoint">
                <h3 class="subsection-heading" style="margin-top: 0;">Food Management</h3>
                <p class="endpoint-desc">Full CRUD operations for the master food database.</p>
                <ul style="list-style: none; padding: 0; margin-top: 1rem;">
                    <li
                        style="margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap;">
                        <span class="method method-get">GET</span>
                        <code style="background: transparent; padding: 0;">/api/admin/foods</code>
                    </li>
                    <li
                        style="margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap;">
                        <span class="method method-post">POST</span>
                        <code style="background: transparent; padding: 0;">/api/admin/foods</code>
                    </li>
                    <li
                        style="margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap;">
                        <span class="method method-put">PUT</span>
                        <code style="background: transparent; padding: 0;">/api/admin/foods/:id</code>
                    </li>
                    <li
                        style="margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap;">
                        <span class="method method-delete">DELETE</span>
                        <code style="background: transparent; padding: 0;">/api/admin/foods/:id</code>
                    </li>
                </ul>
            </div>
        </section>

    </div>

    <!-- Footer -->
    <footer
        style="background: #1e293b; padding: 2rem 0; margin-top: 4rem; border-top: 1px solid rgba(148, 163, 184, 0.2);">
        <div class="container" style="text-align: center;">
            <div style="color: #94a3b8; font-size: 0.9rem;">
                &copy; 2025 Sarvasva. Confidential Documentation.
            </div>
        </div>
    </footer>

    <script>
        function toggleNav() {
            const sidebar = document.querySelector('.sidebar-nav');
            const overlay = document.querySelector('.nav-overlay');
            const toggle = document.querySelector('.mobile-nav-toggle');

            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');

            const icon = toggle.querySelector('i');
            if (sidebar.classList.contains('active')) {
                icon.className = 'fas fa-times';
            } else {
                icon.className = 'fas fa-bars';
            }
        }

        function closeNav() {
            const sidebar = document.querySelector('.sidebar-nav');
            const overlay = document.querySelector('.nav-overlay');
            const toggle = document.querySelector('.mobile-nav-toggle');

            sidebar.classList.remove('active');
            overlay.classList.remove('active');
            toggle.querySelector('i').className = 'fas fa-bars';
        }

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>

</body>

</html>